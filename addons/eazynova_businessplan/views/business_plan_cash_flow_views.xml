<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!-- Vue liste Plan de TrÃ©sorerie -->
    <record id="view_business_plan_cash_flow_tree" model="ir.ui.view">
        <field name="name">business.plan.cash.flow.tree</field>
        <field name="model">business.plan.cash.flow</field>
        <field name="arch" type="xml">
            <list string="Plan de TrÃ©sorerie" editable="bottom" decoration-danger="is_negative==True" decoration-warning="alert_level=='warning'">
                <field name="date"/>
                <field name="month_name"/>
                <field name="total_receipts" sum="Total Encaissements"/>
                <field name="total_expenses" sum="Total DÃ©caissements"/>
                <field name="monthly_cash_flow" sum="Flux Total"/>
                <field name="opening_balance"/>
                <field name="closing_balance" sum="Solde Final"/>
                <field name="is_negative" column_invisible="True"/>
                <field name="alert_level" column_invisible="True"/>
                <field name="currency_id" column_invisible="True"/>
            </list>
        </field>
    </record>

    <!-- Vue formulaire Plan de TrÃ©sorerie -->
    <record id="view_business_plan_cash_flow_form" model="ir.ui.view">
        <field name="name">business.plan.cash.flow.form</field>
        <field name="model">business.plan.cash.flow</field>
        <field name="arch" type="xml">
            <form string="Plan de TrÃ©sorerie">
                <sheet>
                    <div class="oe_button_box" name="button_box">
                        <button name="action_copy_to_next_months" type="object" class="oe_stat_button" icon="fa-copy" string="Copier sur mois suivants"/>
                    </div>
                    <group>
                        <group>
                            <field name="date"/>
                            <field name="month_name"/>
                            <field name="business_plan_id" readonly="1"/>
                        </group>
                        <group>
                            <field name="opening_balance" widget="monetary"/>
                            <field name="closing_balance" widget="monetary"/>
                            <field name="alert_level" widget="badge" decoration-success="alert_level == 'ok'" decoration-warning="alert_level == 'warning'" decoration-danger="alert_level == 'danger'"/>
                            <field name="currency_id" invisible="1"/>
                        </group>
                    </group>
                    <notebook>
                        <page string="ðŸ’° Encaissements">
                            <group>
                                <group>
                                    <field name="sales_receipts" widget="monetary"/>
                                    <field name="capital_input" widget="monetary"/>
                                    <field name="loans_received" widget="monetary"/>
                                </group>
                                <group>
                                    <field name="subsidies" widget="monetary"/>
                                    <field name="other_receipts" widget="monetary"/>
                                    <field name="total_receipts" widget="monetary" class="oe_subtotal_footer_separator"/>
                                </group>
                            </group>
                        </page>
                        <page string="ðŸ’¸ DÃ©caissements">
                            <group string="Achats et charges variables">
                                <group>
                                    <field name="purchases" widget="monetary"/>
                                    <field name="variable_costs" widget="monetary"/>
                                </group>
                            </group>
                            <group string="Charges fixes">
                                <group>
                                    <field name="salaries" widget="monetary"/>
                                    <field name="rent" widget="monetary"/>
                                    <field name="utilities" widget="monetary"/>
                                    <field name="insurance" widget="monetary"/>
                                </group>
                                <group>
                                    <field name="marketing" widget="monetary"/>
                                    <field name="maintenance" widget="monetary"/>
                                    <field name="other_expenses" widget="monetary"/>
                                </group>
                            </group>
                            <group string="Autres dÃ©caissements">
                                <group>
                                    <field name="taxes" widget="monetary"/>
                                    <field name="loan_repayments" widget="monetary"/>
                                </group>
                                <group>
                                    <field name="investments" widget="monetary"/>
                                </group>
                            </group>
                            <group>
                                <field name="total_expenses" widget="monetary" class="oe_subtotal_footer_separator"/>
                            </group>
                        </page>
                        <page string="ðŸ“Š SynthÃ¨se">
                            <group>
                                <group string="Soldes">
                                    <field name="opening_balance" widget="monetary" readonly="1"/>
                                    <field name="total_receipts" widget="monetary" readonly="1"/>
                                    <field name="total_expenses" widget="monetary" readonly="1"/>
                                    <field name="monthly_cash_flow" widget="monetary" readonly="1" class="oe_subtotal_footer_separator"/>
                                    <field name="closing_balance" widget="monetary" readonly="1" class="oe_subtotal_footer_separator" style="font-size:1.2em;font-weight:bold;"/>
                                </group>
                                <group string="Alertes">
                                    <field name="is_negative" widget="boolean_toggle"/>
                                    <field name="alert_level" widget="badge"/>
                                </group>
                            </group>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <!-- Vue graphique -->
    <record id="view_business_plan_cash_flow_graph" model="ir.ui.view">
        <field name="name">business.plan.cash.flow.graph</field>
        <field name="model">business.plan.cash.flow</field>
        <field name="arch" type="xml">
            <graph string="Ã‰volution TrÃ©sorerie" type="line">
                <field name="month_name"/>
                <field name="closing_balance" type="measure"/>
                <field name="monthly_cash_flow" type="measure"/>
            </graph>
        </field>
    </record>

</odoo>
