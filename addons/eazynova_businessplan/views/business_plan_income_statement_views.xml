<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record id="view_business_plan_income_statement_tree" model="ir.ui.view">
        <field name="name">business.plan.income.statement.tree</field>
        <field name="model">business.plan.income.statement</field>
        <field name="arch" type="xml">
            <list string="Compte de RÃ©sultat">
                <field name="year"/>
                <field name="year_label"/>
                <field name="total_revenues" sum="Total CA"/>
                <field name="ebitda" sum="Total EBE"/>
                <field name="operating_profit" sum="Total RÃ©sultat Exploitation"/>
                <field name="net_profit" sum="Total RÃ©sultat Net"/>
                <field name="net_margin"/>
                <field name="currency_id" column_invisible="True"/>
            </list>
        </field>
    </record>

    <record id="view_business_plan_income_statement_form" model="ir.ui.view">
        <field name="name">business.plan.income.statement.form</field>
        <field name="model">business.plan.income.statement</field>
        <field name="arch" type="xml">
            <form string="Compte de RÃ©sultat">
                <sheet>
                    <div class="oe_title">
                        <h1><field name="year_label"/></h1>
                    </div>
                    <group>
                        <field name="business_plan_id" readonly="1"/>
                        <field name="year"/>
                        <field name="currency_id" invisible="1"/>
                    </group>
                    <notebook>
                        <page string="ðŸ’° Produits d'Exploitation">
                            <group>
                                <group>
                                    <field name="sales_revenue" widget="monetary"/>
                                    <field name="services_revenue" widget="monetary"/>
                                </group>
                                <group>
                                    <field name="production_revenue" widget="monetary"/>
                                    <field name="other_revenues" widget="monetary"/>
                                </group>
                            </group>
                            <group>
                                <field name="total_revenues" widget="monetary" readonly="1" class="oe_subtotal_footer_separator"/>
                            </group>
                        </page>
                        <page string="ðŸ’¸ Charges d'Exploitation">
                            <group string="Achats">
                                <field name="purchases_goods" widget="monetary"/>
                                <field name="purchases_materials" widget="monetary"/>
                                <field name="subcontracting" widget="monetary"/>
                            </group>
                            <group string="Charges Externes">
                                <group>
                                    <field name="rent" widget="monetary"/>
                                    <field name="maintenance" widget="monetary"/>
                                    <field name="utilities" widget="monetary"/>
                                    <field name="insurance_premiums" widget="monetary"/>
                                    <field name="advertising" widget="monetary"/>
                                </group>
                                <group>
                                    <field name="transportation" widget="monetary"/>
                                    <field name="banking_fees" widget="monetary"/>
                                    <field name="professional_fees" widget="monetary"/>
                                    <field name="documentation" widget="monetary"/>
                                    <field name="other_external_charges" widget="monetary"/>
                                </group>
                            </group>
                            <group>
                                <field name="total_external_charges" widget="monetary" readonly="1" class="oe_subtotal_footer_separator"/>
                            </group>
                            <group string="Personnel">
                                <field name="gross_salaries" widget="monetary"/>
                                <field name="social_charges" widget="monetary"/>
                                <field name="total_personnel_costs" widget="monetary" readonly="1"/>
                            </group>
                            <group>
                                <field name="business_taxes" widget="monetary"/>
                                <field name="depreciation" widget="monetary"/>
                            </group>
                        </page>
                        <page string="ðŸ“Š RÃ©sultats">
                            <group string="Soldes IntermÃ©diaires">
                                <group>
                                    <field name="commercial_margin" widget="monetary" readonly="1"/>
                                    <field name="value_added" widget="monetary" readonly="1"/>
                                    <field name="ebitda" widget="monetary" readonly="1" class="oe_subtotal_footer_separator"/>
                                    <field name="operating_profit" widget="monetary" readonly="1" class="oe_subtotal_footer_separator"/>
                                </group>
                            </group>
                            <group string="RÃ©sultat Financier">
                                <group>
                                    <field name="financial_income" widget="monetary"/>
                                    <field name="financial_expenses" widget="monetary"/>
                                </group>
                                <group>
                                    <field name="financial_result" widget="monetary" readonly="1"/>
                                </group>
                            </group>
                            <group string="RÃ©sultat Exceptionnel">
                                <group>
                                    <field name="exceptional_income" widget="monetary"/>
                                    <field name="exceptional_expenses" widget="monetary"/>
                                </group>
                                <group>
                                    <field name="exceptional_result" widget="monetary" readonly="1"/>
                                </group>
                            </group>
                            <group string="RÃ©sultat Final">
                                <group>
                                    <field name="profit_before_tax" widget="monetary" readonly="1" class="oe_subtotal_footer_separator"/>
                                    <field name="corporate_tax_rate"/>
                                    <field name="corporate_tax" widget="monetary"/>
                                </group>
                            </group>
                            <group>
                                <field name="net_profit" widget="monetary" readonly="1" class="oe_subtotal_footer_separator" style="font-size:1.3em;font-weight:bold;"/>
                            </group>
                        </page>
                        <page string="ðŸ“ˆ Ratios">
                            <group>
                                <group>
                                    <field name="gross_margin_rate" readonly="1" widget="percentage"/>
                                    <field name="value_added_rate" readonly="1" widget="percentage"/>
                                    <field name="ebitda_margin" readonly="1" widget="percentage"/>
                                </group>
                                <group>
                                    <field name="operating_margin" readonly="1" widget="percentage"/>
                                    <field name="net_margin" readonly="1" widget="percentage"/>
                                    <field name="breakeven_point" widget="monetary" readonly="1"/>
                                </group>
                            </group>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

</odoo>
