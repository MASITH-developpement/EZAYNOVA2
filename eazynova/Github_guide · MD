# ğŸš€ Guide de Mise en Place GitHub - EAZYNOVA

## ğŸ“‹ Table des MatiÃ¨res

1. [Structure du Repository](#structure-du-repository)
2. [Initialisation Git](#initialisation-git)
3. [Organisation des Branches](#organisation-des-branches)
4. [Workflow de DÃ©veloppement](#workflow-de-dÃ©veloppement)
5. [CI/CD avec GitHub Actions](#cicd-avec-github-actions)
6. [Protection des Branches](#protection-des-branches)

---

## ğŸ“ STRUCTURE DU REPOSITORY

### Organisation RecommandÃ©e

```
eazynova/                           # Repository racine
â”‚
â”œâ”€â”€ .github/
â”‚   â”œâ”€â”€ workflows/
â”‚   â”‚   â”œâ”€â”€ tests.yml              # Tests automatiques
â”‚   â”‚   â”œâ”€â”€ lint.yml               # Linting Python
â”‚   â”‚   â””â”€â”€ deploy.yml             # DÃ©ploiement automatique
â”‚   â”œâ”€â”€ ISSUE_TEMPLATE/
â”‚   â”‚   â”œâ”€â”€ bug_report.md
â”‚   â”‚   â””â”€â”€ feature_request.md
â”‚   â””â”€â”€ PULL_REQUEST_TEMPLATE.md
â”‚
â”œâ”€â”€ modules/                        # Tous les modules Odoo
â”‚   â”œâ”€â”€ eazynova/                   # MODULE CORE â­
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ __manifest__.py
â”‚   â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”œâ”€â”€ views/
â”‚   â”‚   â”œâ”€â”€ wizard/
â”‚   â”‚   â”œâ”€â”€ security/
â”‚   â”‚   â”œâ”€â”€ data/
â”‚   â”‚   â”œâ”€â”€ static/
â”‚   â”‚   â”œâ”€â”€ test/
â”‚   â”‚   â””â”€â”€ README.md
â”‚   â”‚
â”‚   â”œâ”€â”€ eazynova_chantier/          # Gestion Chantiers
â”‚   â”œâ”€â”€ eazynova_compta/            # ComptabilitÃ©
â”‚   â”œâ”€â”€ eazynova_planning/          # Planning
â”‚   â”œâ”€â”€ eazynova_facture_client/    # Facturation Clients
â”‚   â”œâ”€â”€ eazynova_facture_fournisseur/
â”‚   â”œâ”€â”€ eazynova_intervention/
â”‚   â”œâ”€â”€ eazynova_achat/
â”‚   â””â”€â”€ eazynova_stock/
â”‚
â”œâ”€â”€ docs/                           # Documentation complÃ¨te
â”‚   â”œâ”€â”€ ARCHITECTURE.md             # Architecture technique
â”‚   â”œâ”€â”€ user/                       # Docs utilisateur
â”‚   â”œâ”€â”€ technical/                  # Docs technique
â”‚   â””â”€â”€ developer/                  # Docs dÃ©veloppeur
â”‚
â”œâ”€â”€ docker/                         # Configuration Docker
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â”œâ”€â”€ docker-compose.yml
â”‚   â””â”€â”€ odoo.conf
â”‚
â”œâ”€â”€ scripts/                        # Scripts utilitaires
â”‚   â”œâ”€â”€ migrate.sh                  # Migration
â”‚   â”œâ”€â”€ deploy.sh                   # DÃ©ploiement
â”‚   â””â”€â”€ test.sh                     # Tests
â”‚
â”œâ”€â”€ .gitignore
â”œâ”€â”€ .flake8
â”œâ”€â”€ .pylintrc
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ README.md
â”œâ”€â”€ LICENSE
â”œâ”€â”€ CONTRIBUTING.md
â””â”€â”€ CHANGELOG.md
```

---

## ğŸ¬ INITIALISATION GIT

### Ã‰tape 1 : CrÃ©er le Repository Local

```bash
# Se placer dans le rÃ©pertoire du projet
cd /path/to/eazynova

# Initialiser Git
git init

# CrÃ©er .gitignore
cat > .gitignore << 'EOF'
# Python
__pycache__/
*.py[cod]
*$py.class
*.so
.Python
env/
venv/
*.egg-info/
dist/
build/

# Odoo
filestore/
sessions/
*.log

# IDE
.vscode/
.idea/
*.swp
*.swo
*~

# OS
.DS_Store
Thumbs.db

# Secrets
*.key
*.pem
.env
secrets/

# Temporary
*.tmp
*.bak
*.old
EOF

# PremiÃ¨re commit
git add .
git commit -m "Initial commit: EAZYNOVA modular architecture"
```

### Ã‰tape 2 : CrÃ©er le Repository sur GitHub

1. Aller sur https://github.com/new
2. Nom du repository : `eazynova`
3. Description : "Solution de gestion d'entreprise pour Odoo 19 CE - Secteur BTP"
4. Public ou PrivÃ© selon vos besoins
5. Ne pas initialiser avec README (on a dÃ©jÃ  le nÃ´tre)

### Ã‰tape 3 : Lier au Repository GitHub

```bash
# Ajouter remote
git remote add origin https://github.com/YOUR_USERNAME/eazynova.git

# VÃ©rifier
git remote -v

# Push initial
git branch -M main
git push -u origin main
```

---

## ğŸŒ¿ ORGANISATION DES BRANCHES

### Structure des Branches

```
main (production)
  â”‚
  â”œâ”€â”€ develop (dÃ©veloppement)
  â”‚     â”‚
  â”‚     â”œâ”€â”€ feature/chantier-gps
  â”‚     â”œâ”€â”€ feature/compta-analytique
  â”‚     â”œâ”€â”€ feature/planning-gantt
  â”‚     â”‚
  â”‚     â”œâ”€â”€ bugfix/facture-total
  â”‚     â””â”€â”€ bugfix/ocr-pdf
  â”‚
  â””â”€â”€ hotfix/critical-security
```

### CrÃ©er les Branches de Base

```bash
# CrÃ©er et push la branche develop
git checkout -b develop
git push -u origin develop

# Retour sur main
git checkout main
```

### Workflow Git Flow

#### Feature (Nouvelle fonctionnalitÃ©)

```bash
# CrÃ©er une feature
git checkout develop
git pull origin develop
git checkout -b feature/nom-feature

# DÃ©velopper...
git add .
git commit -m "Add: Description de la feature"

# Push
git push -u origin feature/nom-feature

# CrÃ©er une Pull Request sur GitHub
# develop â† feature/nom-feature
```

#### Bugfix (Correction de bug)

```bash
# CrÃ©er un bugfix
git checkout develop
git checkout -b bugfix/nom-bug

# Corriger...
git add .
git commit -m "Fix: Description du fix"

# Push et PR
git push -u origin bugfix/nom-bug
```

#### Hotfix (Correction urgente en production)

```bash
# CrÃ©er un hotfix depuis main
git checkout main
git checkout -b hotfix/critical-issue

# Corriger...
git add .
git commit -m "Hotfix: Description"

# Merge dans main ET develop
git checkout main
git merge --no-ff hotfix/critical-issue
git push origin main

git checkout develop
git merge --no-ff hotfix/critical-issue
git push origin develop

git branch -d hotfix/critical-issue
```

#### Release (Mise en production)

```bash
# CrÃ©er une release
git checkout develop
git checkout -b release/19.0.1.0.0

# Tests finaux, corrections mineures...
git add .
git commit -m "Release: 19.0.1.0.0"

# Merge dans main
git checkout main
git merge --no-ff release/19.0.1.0.0
git tag -a v19.0.1.0.0 -m "Version 19.0.1.0.0"
git push origin main --tags

# Merge dans develop
git checkout develop
git merge --no-ff release/19.0.1.0.0
git push origin develop

git branch -d release/19.0.1.0.0
```

---

## ğŸ”„ WORKFLOW DE DÃ‰VELOPPEMENT

### 1. RÃ©cupÃ©rer les DerniÃ¨res Modifications

```bash
git checkout develop
git pull origin develop
```

### 2. CrÃ©er une Branche de Travail

```bash
# Pour une fonctionnalitÃ©
git checkout -b feature/nom-descriptif

# Pour un bug
git checkout -b bugfix/nom-descriptif
```

### 3. DÃ©velopper et Committer

```bash
# Commits atomiques et descriptifs
git add fichier1.py fichier2.xml
git commit -m "Add: Nouvelle fonctionnalitÃ© X"

# Plusieurs commits si nÃ©cessaire
git add autre_fichier.py
git commit -m "Fix: Correction validation champ Y"
```

### 4. Push et Pull Request

```bash
# Push de la branche
git push -u origin feature/nom-descriptif

# Sur GitHub:
# 1. Aller dans l'onglet "Pull Requests"
# 2. Cliquer "New Pull Request"
# 3. Base: develop â† Compare: feature/nom-descriptif
# 4. Remplir titre et description
# 5. Assigner des reviewers
# 6. CrÃ©er la PR
```

### 5. Code Review et Merge

- Les reviewers vÃ©rifient le code
- Les tests automatiques doivent passer (CI/CD)
- Corrections si nÃ©cessaire
- Merge aprÃ¨s approbation

---

## ğŸ¤– CI/CD AVEC GITHUB ACTIONS

### Tests Automatiques

CrÃ©er `.github/workflows/tests.yml` :

```yaml
name: Tests

on:
  push:
    branches: [ develop, main ]
  pull_request:
    branches: [ develop, main ]

jobs:
  test:
    runs-on: ubuntu-latest
    
    services:
      postgres:
        image: postgres:13
        env:
          POSTGRES_DB: test_db
          POSTGRES_USER: odoo
          POSTGRES_PASSWORD: odoo
        ports:
          - 5432:5432
        options: >-
          --health-cmd pg_isready
          --health-interval 10s
          --health-timeout 5s
          --health-retries 5
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.10'
    
    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        pip install -r requirements.txt
        sudo apt-get update
        sudo apt-get install -y tesseract-ocr
    
    - name: Run tests
      env:
        DATABASE_URL: postgresql://odoo:odoo@localhost:5432/test_db
      run: |
        python odoo-bin -c odoo.conf -d test_db \
          --test-enable --stop-after-init \
          -i eazynova,eazynova_chantier
```

### Linting Python

CrÃ©er `.github/workflows/lint.yml` :

```yaml
name: Lint

on: [push, pull_request]

jobs:
  lint:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.10'
    
    - name: Install linters
      run: |
        pip install flake8 pylint black
    
    - name: Lint with flake8
      run: |
        flake8 modules/ --count --select=E9,F63,F7,F82 --show-source --statistics
    
    - name: Check with black
      run: |
        black --check modules/
    
    - name: Lint with pylint
      run: |
        pylint modules/eazynova modules/eazynova_chantier
```

### DÃ©ploiement Automatique sur Railway

CrÃ©er `.github/workflows/deploy.yml` :

```yaml
name: Deploy to Railway

on:
  push:
    branches: [ main ]

jobs:
  deploy:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Deploy to Railway
      env:
        RAILWAY_TOKEN: ${{ secrets.RAILWAY_TOKEN }}
      run: |
        npm i -g @railway/cli
        railway link ${{ secrets.RAILWAY_PROJECT_ID }}
        railway up
```

---

## ğŸ›¡ï¸ PROTECTION DES BRANCHES

### Configuration sur GitHub

1. **Settings** > **Branches** > **Add rule**

2. **Branch name pattern** : `main`
   - âœ… Require a pull request before merging
   - âœ… Require approvals (minimum 1)
   - âœ… Require status checks to pass before merging
     - SÃ©lectionner : `test`, `lint`
   - âœ… Require branches to be up to date
   - âœ… Include administrators

3. **Branch name pattern** : `develop`
   - âœ… Require a pull request before merging
   - âœ… Require status checks to pass before merging
     - SÃ©lectionner : `test`, `lint`

---

## ğŸ“ TEMPLATES GITHUB

### Pull Request Template

CrÃ©er `.github/PULL_REQUEST_TEMPLATE.md` :

```markdown
## Description
<!-- DÃ©crivez vos changements -->

## Type de changement
- [ ] ğŸ› Bug fix
- [ ] âœ¨ Nouvelle fonctionnalitÃ©
- [ ] ğŸ“ Documentation
- [ ] â™»ï¸ Refactoring
- [ ] âš¡ Performance

## Modules concernÃ©s
- [ ] eazynova (CORE)
- [ ] eazynova_chantier
- [ ] eazynova_compta
- [ ] Autre: ___________

## Checklist
- [ ] Mon code suit les standards du projet
- [ ] J'ai ajoutÃ© des tests
- [ ] J'ai mis Ã  jour la documentation
- [ ] Tous les tests passent
- [ ] J'ai vÃ©rifiÃ© le linting

## Tests effectuÃ©s
<!-- DÃ©crivez les tests que vous avez effectuÃ©s -->

## Screenshots
<!-- Si applicable, ajoutez des screenshots -->
```

### Bug Report Template

CrÃ©er `.github/ISSUE_TEMPLATE/bug_report.md` :

```markdown
---
name: Bug Report
about: Signaler un bug
title: '[BUG] '
labels: bug
assignees: ''
---

## Description du Bug
<!-- Description claire du problÃ¨me -->

## Reproduction
1. Aller sur '...'
2. Cliquer sur '...'
3. Voir l'erreur

## Comportement Attendu
<!-- Ce qui devrait se passer -->

## Screenshots
<!-- Si applicable -->

## Environnement
- OS: [ex. Ubuntu 22.04]
- Odoo: [ex. 19.0]
- Module: [ex. eazynova_chantier]
- Version: [ex. 19.0.1.0.0]

## Logs
```
<!-- Collez les logs pertinents ici -->
```

## Contexte Additionnel
<!-- Toute information additionnelle utile -->
```

---

## ğŸ¯ COMMANDES UTILES

### Git Quotidien

```bash
# Status
git status

# Voir les changements
git diff

# Historique
git log --oneline --graph --all

# Branches
git branch -a

# Changer de branche
git checkout nom-branche

# Mettre Ã  jour
git pull origin develop

# Stash (mettre de cÃ´tÃ©)
git stash
git stash pop
```

### Git AvancÃ©

```bash
# Rebase interactif
git rebase -i HEAD~3

# Cherry-pick
git cherry-pick <commit-hash>

# Recherche dans l'historique
git log --grep="search term"

# Annuler dernier commit (garder les changements)
git reset --soft HEAD~1

# Tag
git tag -a v19.0.1.0.0 -m "Release version"
git push origin v19.0.1.0.0
```

---

## âœ… CHECKLIST AVANT CHAQUE COMMIT

- [ ] Le code est commentÃ© en franÃ§ais
- [ ] Les docstrings sont prÃ©sents
- [ ] Les tests passent localement
- [ ] Le linting est OK (flake8, pylint)
- [ ] La documentation est Ã  jour
- [ ] Les migrations sont testÃ©es
- [ ] Pas de secrets committÃ©s (.env, keys, etc.)

---

## ğŸ“ SUPPORT

Questions sur Git/GitHub :
- ğŸ“– [Pro Git Book](https://git-scm.com/book/fr/v2)
- ğŸ“– [GitHub Docs](https://docs.github.com/fr)
- ğŸ“§ Email: dev@eazynova.com

---

**Version** : 1.0.0  
**DerniÃ¨re mise Ã  jour** : 2025-11-22