<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Groupes de sécurité -->
    <record id="group_planning_user" model="res.groups">
        <field name="name">Planning - Utilisateur</field>
        <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
    </record>

    <record id="group_planning_manager" model="res.groups">
        <field name="name">Planning - Gestionnaire</field>
        <field name="implied_ids" eval="[(4, ref('group_planning_user'))]"/>
    </record>

    <record id="group_planning_admin" model="res.groups">
        <field name="name">Planning - Administrateur</field>
        <field name="implied_ids" eval="[(4, ref('group_planning_manager'))]"/>
    </record>

    <!-- Règles d'enregistrement - Tâches de planning -->
    <record id="planning_task_user_rule" model="ir.rule">
        <field name="name">Tâches de planning - Utilisateur</field>
        <field name="model_id" ref="model_eazynova_planning_task"/>
        <field name="domain_force">['|', ('user_id', '=', user.id), ('user_id', '=', False)]</field>
        <field name="groups" eval="[(4, ref('group_planning_user'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="False"/>
        <field name="perm_create" eval="False"/>
        <field name="perm_unlink" eval="False"/>
    </record>

    <record id="planning_task_manager_rule" model="ir.rule">
        <field name="name">Tâches de planning - Gestionnaire</field>
        <field name="model_id" ref="model_eazynova_planning_task"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('group_planning_manager'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_unlink" eval="True"/>
    </record>

    <!-- Règles d'enregistrement - Ressources -->
    <record id="planning_resource_user_rule" model="ir.rule">
        <field name="name">Ressources - Utilisateur</field>
        <field name="model_id" ref="model_eazynova_planning_resource"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('group_planning_user'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="False"/>
        <field name="perm_create" eval="False"/>
        <field name="perm_unlink" eval="False"/>
    </record>

    <record id="planning_resource_manager_rule" model="ir.rule">
        <field name="name">Ressources - Gestionnaire</field>
        <field name="model_id" ref="model_eazynova_planning_resource"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('group_planning_manager'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_unlink" eval="True"/>
    </record>

    <!-- Règles d'enregistrement - Assignations -->
    <record id="planning_assignment_user_rule" model="ir.rule">
        <field name="name">Assignations - Utilisateur</field>
        <field name="model_id" ref="model_eazynova_planning_assignment"/>
        <field name="domain_force">['|', ('resource_id.user_id', '=', user.id), ('user_id', '=', user.id)]</field>
        <field name="groups" eval="[(4, ref('group_planning_user'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="False"/>
        <field name="perm_create" eval="False"/>
        <field name="perm_unlink" eval="False"/>
    </record>

    <record id="planning_assignment_manager_rule" model="ir.rule">
        <field name="name">Assignations - Gestionnaire</field>
        <field name="model_id" ref="model_eazynova_planning_assignment"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('group_planning_manager'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_unlink" eval="True"/>
    </record>

    <!-- Règles d'enregistrement - Absences -->
    <record id="planning_absence_user_rule" model="ir.rule">
        <field name="name">Absences - Utilisateur</field>
        <field name="model_id" ref="model_eazynova_planning_absence"/>
        <field name="domain_force">['|', ('resource_id.user_id', '=', user.id), ('requested_by', '=', user.id)]</field>
        <field name="groups" eval="[(4, ref('group_planning_user'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_unlink" eval="False"/>
    </record>

    <record id="planning_absence_manager_rule" model="ir.rule">
        <field name="name">Absences - Gestionnaire</field>
        <field name="model_id" ref="model_eazynova_planning_absence"/>
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('group_planning_manager'))]"/>
        <field name="perm_read" eval="True"/>
        <field name="perm_write" eval="True"/>
        <field name="perm_create" eval="True"/>
        <field name="perm_unlink" eval="True"/>
    </record>

</odoo>
